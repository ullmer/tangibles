#Examples from tangibles/sw/imu.01

from adafruit_lsm6ds.lsm6ds3 import LSM6DS3 as LSM6DS   #A
import time, board, busio

i2c = busio.I2C(board.GP7, board.GP6)                   #B
accel_gyro = LSM6DS(i2c, address=0x6b)                  #C

while True:
  a = accel_gyro.acceleration
  g = accel_gyro.gyro

  agJson = "{s:ag1, a:[%2.2f,%2.2f,%2.2f], g:[%2.2f,%2.2f,%2.2f]}" % (a+g)
  print(agJson)
  time.sleep(.1)

##### 

from enoTkiButtonArray    import *
from enoEmbSerialConsole  import *
from tkinter              import *
import time

class enoTkiEmbButtonArray(enoTkiButtonArray, enoEmbSerialConsole): #inherits methods from both
  def __init__(self, **kwargs):  
    self.__dict__.update(kwargs) #allow class fields to be passed in constructor
    enoTkiButtonArray.__init__(self)        
    enoEmbSerialConsole.__init__(self)     

  def readIMUMulti(self, arg=None):
    self.sendCommand("ejs.readIMU(50)")
    while True: 
      self.readSerial()
      time.sleep(.05)

root = Tk()    # Create the root (base) window 
etba = enoTkiEmbButtonArray(parent=root, yamlFn='ps06.yaml')

root.mainloop() # Start the event loop

### end ###
numRows: 3
numCols: 3
buttons:
  - {coord: [0, 0], text: blink slow,  bg: "#00a", cb: sendCommand, cbArg: ejs.ledCycleSlow()}
  - {coord: [0, 1], text: blink fast,  bg: "#22c", cb: sendCommand, cbArg: ejs.ledCycleFast()}
  - {coord: [0, 2], text: blink fast2, bg: "#44f", cb: sendCommand, cbArg: "ejs.ledCycle(.2)"}
  - {coord: [1, 2], text: stop blink,  bg: "#777", cb: sendCommand, cbArg: "ejs.setLED(False)"}

  - {coord: [1, 0], text: start IMU,      bg: "#800", cb: sendCommand, cbArg: "ejs.activateIMU()"}
  - {coord: [1, 1], text: read IMU,       bg: "#b00", cb: sendCommand, cbArg: "ejs.readIMU(5)"}
  - {coord: [2, 1], text: read IMU multi, bg: "#d00", cb: readIMUMulti, cbArg: ""}

#  - {coord: [1, 0], text: waves,     bg: lightblue,  cb: gotoTargetPosAbs, cbArg: 100}
#  - {coord: [1, 1], text: new,       bg: peachpuff,  cb: gotoTargetPosAbs, cbArg: 0}

### end ###
picoImuL01.py psEx06.py ps06.yaml
